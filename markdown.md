# Описание разработки кейса на хакатоне от КИБХАК 2023

___

## кратко о возможностях бота: 
1.  Для работы с плтформой была реализована библиотека с пакетами python, которая позволяет **полностью оперировать запросами на сервер** для оперирования жизненным циклом сервиса Elastic Cloud Server (виртуальные машины)
2.  Один из главных аспектов кейса - Telegram бот, олицетворяющий интерфейс и удобное диалоговое окно для управления. В боте реализован полный цикл общения с клиентом - от авторизации до создания виртуальной машины. В ходе создания машины бот предоставляет возможность выбора машин по запросу клиента (реализована система фильтрации запроса на сервер).
3.  Для удобства в навигации внедрена клавиатура с необходимыми кнопками, адаптирующая общение с ботом.
4.  Познакомиться с ботом и командой подробнее можно нажав по кнопке *"Info"* или по [ссылке](https://akishy.github.io) 

## Таблица с описанием каждого python пакета

следующая таблица описывает поведение той или иной функции, внедренной в бота через пакеты python.
| папка                            | краткое описание папки                                                                                                                                                                                                                  | пакет                          | функции в пакете                                                                 | описание функции                                                                                                                                                                                                                                                                       |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ecs_management                   | В данной папке находятся пакеты  для реализации Elastic Cloud Server. В ней находятся такие папки как az_management,  ecs_group_management, flavour_management.                                                                         | ---                            | ---                                                                              | ---                                                                                                                                                                                                                                                                                    |
| ecs_management                   |                                                                                                                                                                                                                                         | ecs_create_server              | x_auth, project_id, image_ref,  flavour_ref, name, vpcid, subnet_id, volumetype) | Функция принимает восемь значений для создания сервера. Токен, id проекта, iso образ, референс машины,  id сети ,id подсети, тип диска для системы, размер диска. Возвращает тех информацию о созданном сервере.                                                                       |
| az_management                    | Данная папка располагает пакетами для работы с  Active Zones. Это помогает клиенту определиться с физическим расположением будущей машины.                                                                                              | get_list_availability_zones.py | get_list_availability_zones(x_auth:  str ,  project_id:  str)                    | функция принимает два обязательных значения: токен авторизации и ID проекта. Функция возвращает динамически сгенерированный объект с параметрами о всех AZ, в том числе имя, доступные хосты в каждой зоне и  статус зоны (активна/неактивна).                                         |
| ecs_group_management             | Данная папка раполагает пакетами для работы с группами ECS. Это необходимо для служебной информации для работы бота, а так же предоставляет возможность выбора проекта для пользователя.                                                | list_server_groups.py          | list_server_groups(x_auth, project_id)                                           | Функция принимает два обязательных значения: токен авториации и ID проекта. Функция  возвращает список доступных групп, а так же описание каждой группы (id, имя, метаданные, участники, политики).                                                                                    |
| flavour_management               | Данная папка располагает пакетами для работы и выбора конфигурации будущего сервера.                                                                                                                                                    | get_list_flavours.py           | get_list_flavours (x_auth, project_id, availability_zone)                        | Функция принимает три обязательных значения: токен авторизации и ID проекта. Возвращает динамически  сгенерированный объект с необходимой информацией по каждой конфигурации.                                                                                                          |
| iam_management                   | Данная папка располагает пакетами для работы с идентификацией и доступом. В ней находятся пакеты для создания временных ключей, получения информации об аккаунте,  id домена, id проекта, получения токена пользователя и его валидации | ---                            | ---                                                                              | ---                                                                                                                                                                                                                                                                                    |
| iam_management                   |                                                                                                                                                                                                                                         | create_temporary_access_key.py | create_temporary_access_key (iam_token, time_to_live_sec)                        | принимает два обязательных значения: токен и время жизни будущего ключа доступа. Возвращает информацию о созданном ключе доступа: Access key, Secret Key, securitytoken.                                                                                                               |
| iam_management                   |                                                                                                                                                                                                                                         | get_account_info.py            | get_account_info(auth_token)                                                     | возвращает словарь, в котором информация об аккаунте в таком порядке: ключ[имя аккаунта] = значение[id_аккаунта]                                                                                                                                                                       |
| iam_management                   |                                                                                                                                                                                                                                         | get_domain_id.py               | get_domain_id(auth_token)                                                        | принимает токен авторизации. Возвращает все домены с их информацией (состояние, id, имя, описание).                                                                                                                                                                                    |
| iam_management                   |                                                                                                                                                                                                                                         | get_project_id.py              | get_project_id.py(auth_token)                                                    | принимает токен авторизации. Возвращает словарь со всеми проектами, который хранит ключ{имя проекта}: значение {id проекта}                                                                                                                                                            |
| iam_management                   |                                                                                                                                                                                                                                         | get_user_token.py              | get_user_token(user_name, domain_name, passw)                                    | принимает три значения: имя пользователя, имя домена, пароль. Возвращает токен авторизации.                                                                                                                                                                                            |
| iam_management                   |                                                                                                                                                                                                                                         | validate_token.py              | validate_token(x_auth_verification_token,  x_subject_token_to_validate)          | Функция принимает 2 значения: токен администратора; токен, который хочешь проверить на валидность. (Можно проверить токен администратора, если ввести в оба поля один и тот же токен). Возвращает объект класса Token, в котором полная информация о токене, его владельце, эндпойнтах |
| region_configuration             | Данная папка используется для конфигурации региона. В ней находятся описания классов для работы с сайтом, определены классы пользователя, региона, и другой технической информации.                                                     | region_config.py               | ---                                                                              | пакет импортируется в другие пакеты для получения технической информации.                                                                                                                                                                                                              |
| virtual_private_cloud_management | Данная папка располагает пакетами для работы с сетями и подсетями. Есть папка vpc_subnets_configuration.  Также располагает пакетами для работы с сетью.                                                                                | ---                            | ---                                                                              | ---                                                                                                                                                                                                                                                                                    |
|                                  |                                                                                                                                                                                                                                         |                                |                                                                                  |                                                                                                                                                                                                                                                                                        |